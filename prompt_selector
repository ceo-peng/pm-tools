<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Meta-Prompt Builder MVP</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 24px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      color: #e5e7eb;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 4px;
    }
    .sub {
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 20px;
    }
    .app {
      max-width: 1080px;
      margin: 0 auto;
      background: #020617;
      border-radius: 18px;
      padding: 20px 22px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.45);
      border: 1px solid #1f2937;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 16px;
      margin-bottom: 20px;
    }
    .field {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    label {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #9ca3af;
    }
    select {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #374151;
      background: #020617;
      color: #e5e7eb;
      font-size: 13px;
      outline: none;
    }
    select:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px #38bdf8;
    }
    .output-container {
      margin-top: 4px;
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1fr);
      gap: 16px;
      align-items: start;
    }
    textarea {
      width: 100%;
      min-height: 220px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid #374151;
      background: #020617;
      color: #e5e7eb;
      font-size: 13px;
      resize: vertical;
      line-height: 1.4;
    }
    textarea:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px #38bdf8;
      outline: none;
    }
    button {
      border: none;
      cursor: pointer;
      padding: 8px 14px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #38bdf8;
      color: #020617;
    }
    button:hover {
      background: #0ea5e9;
    }
    .btn-secondary {
      background: #111827;
      color: #e5e7eb;
      border: 1px solid #374151;
    }
    .btn-secondary:hover {
      background: #1f2937;
    }
    .btn-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      gap: 10px;
    }
    .hint {
      font-size: 12px;
      color: #9ca3af;
      line-height: 1.5;
    }
    .pill {
      display: inline-flex;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      border: 1px solid #374151;
      color: #9ca3af;
      margin-right: 4px;
      margin-bottom: 4px;
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>Meta-Prompt Builder</h1>
    <div class="sub">Select scenario, style and rigor → get a CEO-grade 9.8/10 meta-prompt you can paste into any AI tool.</div>

    <div class="grid">
      <div class="field">
        <label for="scenario">Scenario</label>
        <select id="scenario"></select>
      </div>
      <div class="field">
        <label for="style">Style</label>
        <select id="style"></select>
      </div>
      <div class="field">
        <label for="lang">Language</label>
        <select id="lang"></select>
      </div>
      <div class="field">
        <label for="reader">Reader</label>
        <select id="reader"></select>
      </div>
      <div class="field">
        <label for="format">Format</label>
        <select id="format"></select>
      </div>
      <div class="field">
        <label for="rigor">Rigor</label>
        <select id="rigor"></select>
      </div>
    </div>

    <div class="field" style="max-width:220px;margin-bottom:12px;">
      <label for="selfreview">Self-review</label>
      <select id="selfreview"></select>
    </div>

    <div class="output-container">
      <div>
        <div class="btn-row">
          <button id="generateBtn">Generate meta-prompt</button>
          <button class="btn-secondary" id="copyBtn">Copy</button>
        </div>
        <textarea id="output" placeholder="The combined meta-prompt will appear here..."></textarea>
      </div>
      <div>
        <div class="hint">
          <div style="margin-bottom:6px;">Selected profile:</div>
          <div id="summary"></div>
          <div style="margin-top:10px;">
            Paste this meta-prompt before your actual task, e.g.:<br><br>
            <code style="font-size:11px;">[META-PROMPT]<br>Then perform the following task: ...</code>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  // --- Snippet data (mirrors your Excel structure, simplified here) ---
  const snippets = {
    CORE_BASE: "You are an advanced AI assistant. Before answering, you must: (1) carefully parse the user's request, (2) identify all explicit and implicit requirements (scope, format, audience, tone), (3) break down complex or ambiguous input into clear sub-parts, (4) plan a structured outline, and (5) think step by step to ensure accuracy and completeness before producing the final answer. Always aim for a near-perfect, CEO-level response that is ready for real-world use.",

    // Scenario
    SCENARIO_DD_VALUATION: "Treat this as a due diligence / valuation task. Focus on assumptions, risks, scenarios, and decision logic. Do not fabricate numbers or company-specific facts; if data is missing, state the limitation clearly and suggest what information is needed.",
    SCENARIO_TECH_EXPLAINER: "Treat this as a technical explainer. Use layered explanation: start from intuition, then add professional terminology and more depth so an intelligent non-expert can follow.",
    SCENARIO_BRAND_MARKETING: "Treat this as a brand and marketing copy task. Prioritize clarity, emotional resonance, and a clear call-to-action, while keeping the brand premium and trustworthy.",
    SCENARIO_REWRITE_POLISH: "Treat this as a rewrite and polish task. Preserve the original meaning but improve clarity, flow, and professionalism, matching the requested tone and audience.",
    SCENARIO_GENERIC: "Treat this as a general high-quality reasoning task. Focus on giving a clear, structured, and directly useful answer to the user's goal.",

    // Style
    STYLE_TW_EXECUTIVE: "Use a calm, concise Taiwan executive tone: polite, pragmatic, structured, and slightly formal, avoiding unnecessary enthusiasm.",
    STYLE_BANKER_STYLE: "Use an investment-banking / strategy-consulting tone: precise, structured, and professional, with clear headlines and concise supporting points.",
    STYLE_CASUAL: "Use a casual, friendly tone while staying clear and respectful. Use short sentences and natural phrasing.",
    STYLE_PROPHECY_GOLDEN: "Align to Prophecy Morocco’s “Golden Minimalism Skincare” philosophy: premium, warm, minimalist, and focused on cactus seed oil and Moroccan argan oil as the core value.",

    // Lang
    LANG_ZH_TW: "Write the final answer in Traditional Chinese, adding key professional English terms in parentheses where they improve understanding.",
    LANG_EN: "Write the final answer in clear, professional English.",
    LANG_BILINGUAL: "Write the final answer mainly in Traditional Chinese, and include the corresponding professional English terms directly in-line when first introduced.",

    // Reader
    READER_INVESTOR_LP: "Assume the reader is a sophisticated investor or LP. Focus on logic, risk–return profile, assumptions, and decision implications. Avoid marketing fluff.",
    READER_SENIOR_HIGH: "Assume the reader is a smart senior high school student. Use simple language and concrete analogies, while still mentioning key technical terms.",
    READER_CONSUMER: "Assume the reader is a general consumer. Avoid jargon, focus on benefits, clarity, and trust.",
    READER_INTERNAL_TEAM: "Assume the reader is an internal team member. Be direct, structured, and action-oriented, with clear next steps or options.",

    // Format
    FORMAT_TABLE_FIRST: "Whenever reasonable, prefer tables to summarize key comparisons, structures, or frameworks, then briefly explain the table afterwards.",
    FORMAT_FRAMEWORK: "Organize the answer as a clear framework or tree: top-level pillars, then sub-points under each, aiming for MECE-style coverage as much as possible.",
    FORMAT_BULLETS_STRICT: "Use well-structured bullet lists. No empty items; if you promise N points, output exactly N points with consistent structure, tone, and length.",
    FORMAT_SLIDE_STYLE: "Structure the answer as if it were slide pages: strong titles that capture the key message, followed by concise supporting bullets.",

    // Rigor
    RIGOR_STRICT_NO_HALLU: "Do not guess or invent facts. If you lack reliable information, explicitly say you are unsure, and explain what additional data would be required instead of speculating.",
    RIGOR_EXPLICIT_ASSUMPTIONS: "You may use reasonable assumptions, but clearly mark them as “Assumptions” and explain how they affect the conclusions.",
    RIGOR_CREATIVE: "You may be creative and speculative, as long as it is helpful. Make sure creative parts are clearly presented as ideas or possibilities, not as hard facts.",

    // Self-review (CEO standard)
    SELFREVIEW_98: "Before sending the final answer, simulate a self-rating from 1 to 10 on: accuracy, completeness, logical structure, depth of insight, brevity, consistency, and practical usefulness. If you feel even slight hesitation about any dimension being near-perfect (equivalent to below 9.8/10), you must revise once, focusing only on the weakest parts. Prioritize correctness, clarity, and structure over length. Do not add fluff or speculate just to look more impressive. After revision, output the best version you can produce."
  };

  // Option definitions for dropdowns
  const options = {
    scenario: [
      { key: "DD_VALUATION", label: "DD / Valuation" },
      { key: "TECH_EXPLAINER", label: "Technical explainer" },
      { key: "BRAND_MARKETING", label: "Brand / marketing copy" },
      { key: "REWRITE_POLISH", label: "Rewrite / polish" },
      { key: "GENERIC", label: "Generic reasoning" }
    ],
    style: [
      { key: "TW_EXECUTIVE", label: "TW executive tone" },
      { key: "BANKER_STYLE", label: "Banker / consulting" },
      { key: "CASUAL", label: "Casual & friendly" },
      { key: "PROPHECY_GOLDEN", label: "Prophecy – Golden Minimalism" }
    ],
    lang: [
      { key: "ZH_TW", label: "Traditional Chinese" },
      { key: "EN", label: "English" },
      { key: "BILINGUAL", label: "Bilingual (ZH + EN terms)" }
    ],
    reader: [
      { key: "INVESTOR_LP", label: "LP / Investor" },
      { key: "SENIOR_HIGH", label: "Senior high student" },
      { key: "CONSUMER", label: "General consumer" },
      { key: "INTERNAL_TEAM", label: "Internal team" }
    ],
    format: [
      { key: "", label: "— No specific preference —" },
      { key: "TABLE_FIRST", label: "Prefer tables" },
      { key: "FRAMEWORK", label: "Framework / tree" },
      { key: "BULLETS_STRICT", label: "Strict bullet list" },
      { key: "SLIDE_STYLE", label: "Slide-style" }
    ],
    rigor: [
      { key: "", label: "— Normal —" },
      { key: "STRICT_NO_HALLU", label: "Strict: no hallucination" },
      { key: "EXPLICIT_ASSUMPTIONS", label: "Explicit assumptions" },
      { key: "CREATIVE", label: "Creative allowed" }
    ],
    selfreview: [
      { key: "98", label: "CEO 9.8/10 standard" }
    ]
  };

  function fillSelect(id, group) {
    const select = document.getElementById(id);
    options[group].forEach(opt => {
      const o = document.createElement("option");
      o.value = opt.key;
      o.textContent = opt.label;
      select.appendChild(o);
    });
  }

  ["scenario","style","lang","reader","format","rigor","selfreview"].forEach(id => {
    fillSelect(id, id === "selfreview" ? "selfreview" : id);
  });

  // Set some defaults similar to your Excel presets
  document.getElementById("scenario").value = "DD_VALUATION";
  document.getElementById("style").value = "TW_EXECUTIVE";
  document.getElementById("lang").value = "ZH_TW";
  document.getElementById("reader").value = "INVESTOR_LP";
  document.getElementById("format").value = "TABLE_FIRST";
  document.getElementById("rigor").value = "STRICT_NO_HALLU";
  document.getElementById("selfreview").value = "98";

  function buildPrompt() {
    const s = v => document.getElementById(v).value;

    const pieces = [];
    pieces.push(snippets.CORE_BASE);

    if (s("scenario")) {
      pieces.push(snippets["SCENARIO_" + s("scenario")]);
    }
    if (s("style")) {
      pieces.push(snippets["STYLE_" + s("style")]);
    }
    if (s("lang")) {
      pieces.push(snippets["LANG_" + s("lang")]);
    }
    if (s("reader")) {
      pieces.push(snippets["READER_" + s("reader")]);
    }
    if (s("format")) {
      pieces.push(snippets["FORMAT_" + s("format")]);
    }
    if (s("rigor")) {
      pieces.push(snippets["RIGOR_" + s("rigor")]);
    }
    if (s("selfreview")) {
      pieces.push(snippets["SELFREVIEW_" + s("selfreview")]);
    }

    const prompt = pieces.join(" ");
    document.getElementById("output").value = prompt;

    // Summary pills
    const summary = document.getElementById("summary");
    summary.innerHTML = "";
    function pill(label) {
      const span = document.createElement("span");
      span.className = "pill";
      span.textContent = label;
      summary.appendChild(span);
    }
    const getLabel = (group, key) =>
      (options[group].find(o => o.key === key) || {}).label || "";

    pill(getLabel("scenario", s("scenario")));
    pill(getLabel("style", s("style")));
    pill(getLabel("lang", s("lang")));
    pill(getLabel("reader", s("reader")));
    if (s("format")) pill(getLabel("format", s("format")));
    if (s("rigor")) pill(getLabel("rigor", s("rigor")));
    pill("Self-review: CEO 9.8/10");
  }

  document.getElementById("generateBtn").addEventListener("click", buildPrompt);
  buildPrompt(); // initial

  document.getElementById("copyBtn").addEventListener("click", () => {
    const ta = document.getElementById("output");
    ta.select();
    document.execCommand("copy");
  });
</script>
</body>
</html>
